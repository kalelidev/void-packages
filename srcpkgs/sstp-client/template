# Template file for 'sstp-client'
pkgname=sstp-client
version=1.0.20
revision=1
build_style=gnu-configure
short_desc="Secure Socket Tunneling Protocol (SSTP) client"
maintainer="kalelidev <gxiime@gmail.com>"
license="GPL-2.0-or-later"
homepage="https://gitlab.com/sstp-project/sstp-client"
distfiles="https://gitlab.com/sstp-project/sstp-client/-/releases/${version}/downloads/dist-gzip/sstp-client-${version}.tar.gz"
checksum="6c84b6cdcc21ebea6daeb8c5356dcdfd8681f4981a734f8485ed0b31fc30aadd"

_pppver=2.5.0

configure_args="--prefix=/usr
	--with-runtime-dir=/var/run/sstpc
	--with-pppd-plugin-dir=/usr/lib/pppd/${_pppver}"

hostmakedepends="pkg-config libtool"
makedepends="ppp-devel libevent-devel openssl-devel"
depends="ppp ca-certificates"
make_dirs="/var/run/sstpc 0755 root root"
# No useful testsuite upstream
make_check="no"

sstp-client-devel_package() {
	depends="${sourcepkg}>=${version}_${revision}"
	short_desc+=" - development files"
	pkg_install() {
		vmove usr/include
		vmove usr/lib/pkgconfig
		vmove usr/lib/libsstp_api.so
		vmove "usr/lib/*.a" 2>/dev/null || :
		vmove "usr/lib/pppd/${_pppver}/*.a"
	}
}
